/* raytracing.h
 * date : 05/09/2024 (dd/mm/yy)
 * author : tboisse
*/
#ifndef RAYTRACING_H
#define RAYTRACING_H
//-----------------------------------------------------------------------------------------------------------------------
// Includes
//-----------------------------------------------------------------------------------------------------------------------
#include "draw.h"
#include "coordinates.h"
#include "objects.h"
//-----------------------------------------------------------------------------------------------------------------------
// Macros
//-----------------------------------------------------------------------------------------------------------------------
#define MAX_ELEMENTS 6
#define TMAX_ALL 10000
#define TMAX_POINT 1
//-----------------------------------------------------------------------------------------------------------------------
// Typedefs
//-----------------------------------------------------------------------------------------------------------------------
typedef struct lightSource_s lightSource_t;
typedef struct sceneContext_s sceneContext_t;
typedef enum lightType_e lightType;
//-----------------------------------------------------------------------------------------------------------------------
// Structures
//-----------------------------------------------------------------------------------------------------------------------
struct lightSource_s{
    int type;
    float intensity;
    point_t carac; //<< could be position or direction
};

struct sceneContext_s{
    point_t origin;
    int viewportWidth;
    int viewportHeight;
    int viewportDistance;
    object_t objects[MAX_ELEMENTS];
    lightSource_t lights[MAX_ELEMENTS];
    int numObjects; 
    int numLights; 
};
//-----------------------------------------------------------------------------------------------------------------------
// Enums
//-----------------------------------------------------------------------------------------------------------------------
enum lightType_e{
    LT_ambiant = 0,
    LT_point,
    LT_directional
};
//-----------------------------------------------------------------------------------------------------------------------
// Variables
//-----------------------------------------------------------------------------------------------------------------------
extern sceneContext_t g_context;
//-----------------------------------------------------------------------------------------------------------------------
// Functions
//-----------------------------------------------------------------------------------------------------------------------
int RT_initScene(point_t* origin, int vW, int vH, int vD);
int RT_addObject(object_t* object_ptr);
int RT_addLight(lightSource_t* light);
int RT_drawScene();

#endif /* RAYTRACING_H */